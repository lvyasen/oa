webpackJsonp([9],{"3pqJ":function(t,e){},fJ44:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("ryJa"),o=i.n(s),a=i("15QY"),r=i("8dnD"),l={components:{NavTemplent:a.a,TablePage:r.a},data:function(){return{title:"编辑物流费用",logisticsList:[],page:{pageSize:1,pageNum:50},editLogisticMessage:null,dialogVisible:!1,valueList:[],dateList:[],siteList:null,roleList:[],total:0,shippingList:[],form:{web_id:"",date:[o()(o()().valueOf()-6048e5).format("YYYY/MM/DD"),o()(o()()+864e5).format("YYYY/MM/DD")],status:0,total_fee:"",dateWarehouseShipping:"",platformFeeTotal:"",shipFee:"",orderWeight:"",shippingMethod:"",shippingMethodNo:"",warehouseOrderCode:"",webId:""}}},methods:{updateSite:function(){this.getLogisticsList(),this.getLogisticsLineChart()},downLoad:function(){var t=this;this.startTime=this.$root.$options.filters.dateFormat(this.form.date[0],"YYYY/MM/DD"),this.lastTime=this.$root.$options.filters.dateFormat(this.form.date[1],"YYYY/MM/DD"),this.$exportExcel("/getLogisticsList",{pageNum:this.page.pageNum,page:this.page.pageSize,lastTime:this.lastTime,startTime:this.startTime,web_id:this.form.web_id,download:1}).then(function(){t.$message.success("下载成功")})},updateSize:function(t){this.page.pageSize=1,this.page.pageNum=t,this.getLogisticsList()},updateNum:function(t){this.page.pageSize=t,this.getLogisticsList()},getLogisticsList:function(){var t=this;this.startTime=this.$root.$options.filters.dateFormat(this.form.date[0],"YYYY/MM/DD"),this.lastTime=this.$root.$options.filters.dateFormat(this.form.date[1],"YYYY/MM/DD"),this.$post("/getLogisticsList",{pageNum:this.page.pageNum,page:this.page.pageSize,lastTime:this.lastTime,startTime:this.startTime,web_id:this.form.web_id}).then(function(e){t.logisticsList=e.list})},getSiteList:function(){var t=this;this.$post("getGaWebSitList",{pageNum:1e4,page:this.page.pageSize}).then(function(e){t.siteList=e.list})},getLogisticsLineChart:function(){var t=this;console.log(this.form),this.$post("getLogisticsLineChart",{web_id:this.form.web_id}).then(function(e){t.dateList=e.map(function(t){return t.date}),t.valueList=e.map(function(t){return t.value}),e&&t.drawLine()})},drawLine:function(){this.$echarts.init(document.getElementById("myChart")).setOption({title:{text:"物流费用"},xAxis:{type:"category",boundaryGap:!1,data:this.dateList},yAxis:{type:"value"},series:[{data:this.valueList,type:"line",areaStyle:{}}]})},editLogisticsMessage:function(t){this.editLogisticMessage=t,this.getShippingMethod(),this.dialogVisible=!0,t.id?(this.form=t,this.form.dateWarehouseShipping=1e3*t.dateWarehouseShipping):(this.form.package_num="",this.form.package_price="",this.form.zipper_package_num="",this.form.zipper_package_price="",this.form.ticket_price="",this.form.ticket_num="",this.form.buy_time="",this.form.img_path="")},delLogisticsMessage:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$post("delLogistics",{id:t.id}).then(function(){e.$message.success("物料删除成功"),e.getLogisticsList()})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},cancle:function(){this.dialogVisible=!1,this.$emit("close")},getShippingMethod:function(){var t=this;this.$post("getShippingMethod").then(function(e){t.shippingList=e})},save:function(){var t=this;this.editLogisticMessage.id?this.$post("editLogistics",{id:this.editLogisticMessage.id,warehouseOrderCode:this.form.warehouseOrderCode,shippingMethodNo:this.form.shippingMethodNo,orderWeight:this.form.orderWeight,shippingMethod:this.form.shippingMethod,platformFeeTotal:this.form.platformFeeTotal,shipFee:this.form.shipFee,dateWarehouseShipping:o()(this.form.dateWarehouseShipping).format("YYYY/MM/DD"),webId:this.form.webId}).then(function(){t.$message.success("物料信息修改成功"),t.dialogVisible=!1,t.$emit("close"),t.getLogisticsList()}):this.$post("addLogistics",{warehouseOrderCode:this.form.warehouseOrderCode,shippingMethodNo:this.form.shippingMethodNo,orderWeight:this.form.orderWeight,shippingMethod:this.form.shippingMethod,platformFeeTotal:this.form.platformFeeTotal,shipFee:this.form.shipFee,dateWarehouseShipping:this.form.dateWarehouseShipping,webId:this.form.webId}).then(function(e){t.$message.success("物料新增成功"),t.dialogVisible=!1,t.$emit("close"),t.getLogisticsList()})}},mounted:function(){this.getLogisticsList(),this.getSiteList(),this.getLogisticsLineChart()}},n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("NavTemplent",{attrs:{title:"物流费用"}}),t._v(" "),i("div",{staticStyle:{padding:"15px 10% 15px 15px"}},[i("div",[i("h5",{staticStyle:{"font-weight":"bold"}},[t._v("数据筛选")]),t._v(" "),i("el-form",{staticStyle:{"margin-top":"15px"},attrs:{"label-width":"80px",inline:"",size:"mini"},nativeOn:{submit:function(t){t.preventDefault()}}},[i("el-form-item",{attrs:{label:"站点"}},[i("el-select",{attrs:{placeholder:"请选择站点"},on:{change:t.updateSite},model:{value:t.form.web_id,callback:function(e){t.$set(t.form,"web_id",e)},expression:"form.web_id"}},t._l(t.siteList,function(t){return i("el-option",{key:t.web_id,attrs:{value:t.web_id,label:t.web_name}})}),1)],1)],1)],1),t._v(" "),i("el-row",[i("el-col",{attrs:{span:24}},[i("div",{staticStyle:{width:"100%",height:"400px"},attrs:{id:"myChart"}})])],1),t._v(" "),i("div",{staticClass:"tableTitle"},[i("span",{staticStyle:{width:"50%",float:"left"}},[i("div",{staticStyle:{float:"left",width:"100px"}},[t._v("物流列表")]),t._v(" "),i("el-form",{staticStyle:{float:"left"},attrs:{"label-width":"80px",inline:"",size:"mini"},nativeOn:{submit:function(t){t.preventDefault()}}},[i("el-date-picker",{staticStyle:{width:"250px"},attrs:{size:"mini",type:"daterange",format:"yyyy/MM/dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.getLogisticsList},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1)],1),t._v(" "),i("span",{staticStyle:{width:"50%",float:"right","text-align":"right"}},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.downLoad}},[i("i",{staticClass:"el-icon-download"}),t._v("导出")])],1)]),t._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.logisticsList,border:""}},[i("el-table-column",{attrs:{type:"index"}}),t._v(" "),i("el-table-column",{attrs:{label:"仓库单号"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.warehouseOrderCode||"--"))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"物流单号"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.shippingMethodNo||"--"))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"重量"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.orderWeight||"--"))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"运输渠道"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.shippingMethod))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"单价"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.shipFee))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"发货日期"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(t._f("dateFormat")(1e3*e.row.dateWarehouseShipping,"YYYY/MM/DD")))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"总费用"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.platformFeeTotal))])]}}])})],1),t._v(" "),i("TablePage",{attrs:{pageSize:t.page.pageNum,pageNum:t.page.pageSize,total:t.total},on:{"update:pageSize":t.updateSize,"update:pageNum":t.updateNum}})],1),t._v(" "),i("el-dialog",{attrs:{title:t.title,visible:t.dialogVisible,width:"750px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-form",{attrs:{size:"mini"}},[i("el-form-item",{attrs:{label:"单号"}},[i("el-input",{attrs:{placeholder:"请输入单号"},model:{value:t.form.warehouseOrderCode,callback:function(e){t.$set(t.form,"warehouseOrderCode",e)},expression:"form.warehouseOrderCode"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"跟踪号"}},[i("el-input",{attrs:{placeholder:"请输入跟踪号"},model:{value:t.form.shippingMethodNo,callback:function(e){t.$set(t.form,"shippingMethodNo",e)},expression:"form.shippingMethodNo"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"网站"}},[i("el-select",{attrs:{placeholder:"请选择站点"},model:{value:t.form.webId,callback:function(e){t.$set(t.form,"webId",e)},expression:"form.webId"}},t._l(t.siteList,function(t){return i("el-option",{key:t.web_id,attrs:{value:t.web_id,label:t.web_name}})}),1)],1),t._v(" "),i("el-form-item",{attrs:{label:"运输渠道"}},[i("el-select",{attrs:{placeholder:"请选择运输渠道"},model:{value:t.form.shippingMethod,callback:function(e){t.$set(t.form,"shippingMethod",e)},expression:"form.shippingMethod"}},t._l(t.shippingList,function(t){return i("el-option",{key:t.id,attrs:{label:t.sm_name_cn,value:t.sm_code}})}),1)],1),t._v(" "),i("el-form-item",{attrs:{label:"重量"}},[i("el-input",{attrs:{placeholder:"请输入重量"},model:{value:t.form.orderWeight,callback:function(e){t.$set(t.form,"orderWeight",e)},expression:"form.orderWeight"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"单价"}},[i("el-input",{attrs:{placeholder:"请输入单价"},model:{value:t.form.shipFee,callback:function(e){t.$set(t.form,"shipFee",e)},expression:"form.shipFee"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"处理费"}},[i("el-input",{attrs:{placeholder:"请输入处理费"},model:{value:t.form.platformFeeTotal,callback:function(e){t.$set(t.form,"platformFeeTotal",e)},expression:"form.platformFeeTotal"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"发货日期"}},[i("el-date-picker",{attrs:{type:"date",placeholder:"日期"},model:{value:t.form.dateWarehouseShipping,callback:function(e){t.$set(t.form,"dateWarehouseShipping",e)},expression:"form.dateWarehouseShipping"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"总费用"}},[i("span",[t._v("￥"+t._s(t.form.total_fee||0))])])],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:t.cancle}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var p=i("VU/8")(l,n,!1,function(t){i("3pqJ")},"data-v-ccadfe6a",null);e.default=p.exports}});
//# sourceMappingURL=9.3c2bab721b58c729fbbd.js.map