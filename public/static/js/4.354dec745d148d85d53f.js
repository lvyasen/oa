webpackJsonp([4],{VHwT:function(e,t){},"wI/P":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i("15QY"),a=i("8dnD"),n={components:{NavTemplent:s.a,TablePage:a.a},data:function(){return{shopfiyMessage:!1,omsMessage:!1,gaMessage:!1,page:{pageSize:1,pageNum:50},editUse:null,title:"站点信息",dialogVisible:!1,siteList:[],omSiteMessage:null,gaSiteMessage:null,form:{view_id:"",website_name:"",siteName:"",website_domain:""}}},methods:{getSiteList:function(){var e=this;this.$post("/getGaWebSitList",{pageNum:1e4,page:this.page.pageSize,website_name:this.form.siteName}).then(function(t){e.siteList=t.list})},editUseMessage:function(e){this.dialogVisible=!0,this.gaSiteMessage=e,e.website_id?this.form=e:(this.form.view_id="",this.form.website_name="",this.form.website_domain="")},delUseMessage:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){0===t.form.siteType?t.$post("delWebsite",{website_id:e.website_id}).then(function(){t.getSiteList(),t.$message.success("OMS站点删除成功")}):2===t.form.siteType&&t.$post("delGaConfig",{website_id:e.website_id}).then(function(){t.getSiteList(),t.$message.success("GA站点删除成功")})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},cancle:function(){this.dialogVisible=!1,this.$emit("close")},save:function(){var e=this;this.gaSiteMessage.website_id?this.$post("editGaconfig",{website_id:this.gaSiteMessage.website_id,website_name:this.form.website_name,view_id:this.form.view_id,website_domain:this.form.website_domain}).then(function(){e.$message.success("GA站点修改成功"),e.dialogVisible=!1,e.$emit("close"),e.getSiteList()}):this.$post("addGaConfig",{website_name:this.form.website_name,website_domain:this.form.website_domain,view_id:this.form.view_id}).then(function(){e.$message.success("GA站点添加成功"),e.dialogVisible=!1,e.$emit("close"),e.getSiteList()})}},mounted:function(){this.getSiteList()}},l={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("NavTemplent",{attrs:{title:"站点管理"}}),e._v(" "),i("div",{staticStyle:{padding:"15px 10% 15px 15px"}},[i("div",[i("h5",{staticStyle:{"font-weight":"bold"}},[e._v("数据筛选")]),e._v(" "),i("el-form",{staticStyle:{"margin-top":"15px"},attrs:{"label-width":"80px",inline:"",size:"mini"},nativeOn:{submit:function(e){e.preventDefault()}}},[i("el-form-item",{attrs:{label:"站点"}},[i("el-input",{attrs:{placeholder:"请输入站点名称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getSiteList(t)}},model:{value:e.form.siteName,callback:function(t){e.$set(e.form,"siteName",t)},expression:"form.siteName"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"tableTitle"},[e._m(0),e._v(" "),i("span",{staticStyle:{width:"50%",float:"right","text-align":"right"}},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.editUseMessage}},[i("i",{staticClass:"el-icon-plus"}),e._v("添加")])],1)]),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.siteList,border:""}},[i("el-table-column",{attrs:{type:"index"}}),e._v(" "),i("el-table-column",{attrs:{label:"站点名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.web_name||"--"))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"站点类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.website_type||"--"))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(e._f("dateFormat")(1e3*t.row.update_time,"YYYY/MM/DD")))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-link",{staticStyle:{color:"#409EFF"},on:{click:function(i){return e.editUseMessage(t.row)}}},[e._v("编辑")]),e._v(" "),i("el-link",{staticStyle:{color:"#409EFF"},on:{click:function(i){return e.delUseMessage(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),i("TablePage",{attrs:{pageSize:e.page.pageSize,pageNum:e.page.pageNum,total:e.siteList.length}}),e._v(" "),i("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"750px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-form",{attrs:{size:"mini"}},[i("el-form-item",{attrs:{label:"站点名称"}},[i("el-input",{attrs:{placeholder:"请输入站点名称"},model:{value:e.form.website_name,callback:function(t){e.$set(e.form,"website_name",t)},expression:"form.website_name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"数据视图ID"}},[i("el-input",{attrs:{placeholder:"请输入数据视图"},model:{value:e.form.view_id,callback:function(t){e.$set(e.form,"view_id",t)},expression:"form.view_id"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"网站地址"}},[i("el-input",{attrs:{placeholder:"请输入站点地址"},model:{value:e.form.website_domain,callback:function(t){e.$set(e.form,"website_domain",t)},expression:"form.website_domain"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:e.cancle}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.save}},[e._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticStyle:{width:"50%",float:"left"}},[t("div",[this._v("站点列表")])])}]};var o=i("VU/8")(n,l,!1,function(e){i("VHwT")},"data-v-fcab3216",null);t.default=o.exports}});
//# sourceMappingURL=4.354dec745d148d85d53f.js.map