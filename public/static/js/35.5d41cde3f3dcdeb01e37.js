webpackJsonp([35],{N4oK:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("ryJa"),i=a.n(s),o=a("15QY"),l=a("8dnD"),n={components:{NavTemplent:o.a,TablePage:l.a},data:function(){return{page:{pageSize:1,pageNum:50},userList:[],editUse:null,title:"需求岗位",dialogVisible:!1,indicatorsList:[],departmentList:[],quotaMessage:null,total:0,form:{userId:[],finish:0,type:1,desc:"",chooseDate:[i()(i()().valueOf()-6048e5).format("YYYY/MM/DD"),i()(i()()+864e5).format("YYYY/MM/DD")],date:[i()(i()().valueOf()-6048e5).format("YYYY/MM/DD"),i()(i()()+864e5).format("YYYY/MM/DD")],department_id:"",departmentId:"",jobName:"",jobNum:"",status:!1}}},methods:{getJobNeedsList:function(){var e=this;this.startTime=this.$root.$options.filters.dateFormat(this.form.chooseDate[0],"YYYY/MM/DD"),this.lastTime=this.$root.$options.filters.dateFormat(this.form.chooseDate[1],"YYYY/MM/DD"),this.$post("/getJobNeedsList",{complete:this.form.finish,type:this.form.type,department_id:this.form.departmentId,page:this.page.pageSize,pageNum:this.page.pageNum,start_time:this.startTime,end_time:this.lastTime}).then(function(t){e.indicatorsList=t.list,e.total=t.count})},getUserList:function(){var e=this;this.$post("getUserList",{page:this.page.pageSize,pageNum:1e6}).then(function(t){e.userList=t.list.filter(function(e){return"人事部"===e.department_name})})},updateSize:function(e){this.page.pageSize=1,this.page.pageNum=e,this.getindicatorsList()},updateNum:function(e){this.page.pageSize=e,this.getindicatorsList()},getDepartmentList:function(){var e=this;this.$post("/getDepartmentList").then(function(t){e.departmentList=t.list}).catch(function(t){e.$message.error(t)})},editJobMessage:function(e){this.dialogVisible=!0,this.quotaMessage=e,e.quota_id?this.form=e:(this.form.quota_name="",this.form.quota_desc="",this.form.department_id="")},delJobMessage:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$post("delJobNeeds",{job_needs_id:e.job_needs_id}).then(function(){t.getJobNeedsList(),t.$message.success("需求岗位删除成功")})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},cancle:function(){this.dialogVisible=!1,this.$emit("close")},save:function(){var e=this;this.quotaMessage.quota_id?(this.form.quota_id=this.quotaMessage.quota_id,this.$post("editJobNeeds",this.form).then(function(){e.$message.success("修改新增成功"),e.dialogVisible=!1,e.$emit("close"),e.getJobNeedsList()})):(this.startTime=this.$root.$options.filters.dateFormat(this.form.date[0],"YYYY/MM/DD"),this.lastTime=this.$root.$options.filters.dateFormat(this.form.date[1],"YYYY/MM/DD"),this.$post("addJobNeeds",{job_name:this.form.jobName,department_id:this.form.department_id,people:this.form.jobNum,desc:this.form.desc,task_user:this.form.userId,start_time:this.startTime,end_time:this.lastTime}).then(function(){e.$message.success("指标新增成功"),e.dialogVisible=!1,e.$emit("close"),e.getJobNeedsList()}))}},mounted:function(){this.getUserList(),this.getDepartmentList(),this.getJobNeedsList()}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("NavTemplent",{attrs:{title:"需求岗位管理"}}),e._v(" "),a("div",{staticStyle:{padding:"15px 10% 15px 15px"}},[a("div",[a("h5",{staticStyle:{"font-weight":"bold"}},[e._v("数据筛选")]),e._v(" "),a("el-form",{staticStyle:{"margin-top":"15px"},attrs:{"label-width":"80px",inline:"",size:"mini"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:"部门"}},[a("el-select",{attrs:{placeholder:"请选择部门"},on:{change:e.getJobNeedsList},model:{value:e.form.departmentId,callback:function(t){e.$set(e.form,"departmentId",t)},expression:"form.departmentId"}},e._l(e.departmentList,function(e){return a("el-option",{key:e.department_id,attrs:{value:e.department_id,label:e.department_name}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"类型"}},[a("el-select",{attrs:{placeholder:"请选择查询类型"},on:{change:e.getJobNeedsList},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-option",{attrs:{label:"全部",value:1}}),e._v(" "),a("el-option",{attrs:{label:"个人",value:2}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"是否完成"}},[a("el-select",{attrs:{placeholder:"请选择查询类型"},on:{change:e.getJobNeedsList},model:{value:e.form.finish,callback:function(t){e.$set(e.form,"finish",t)},expression:"form.finish"}},[a("el-option",{attrs:{label:"完成",value:1}}),e._v(" "),a("el-option",{attrs:{label:"未完成",value:0}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"选择时间"}},[a("el-date-picker",{staticStyle:{width:"250px"},attrs:{size:"mini",type:"daterange",format:"yyyy/MM/dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.getJobNeedsList},model:{value:e.form.chooseDate,callback:function(t){e.$set(e.form,"chooseDate",t)},expression:"form.chooseDate"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"tableTitle"},[e._m(0),e._v(" "),a("span",{staticStyle:{width:"50%",float:"right","text-align":"right"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.editJobMessage}},[a("i",{staticClass:"el-icon-plus"}),e._v("添加")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.indicatorsList,border:""}},[a("el-table-column",{attrs:{type:"index"}}),e._v(" "),a("el-table-column",{attrs:{label:"管理者"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.manager_user_id||"--"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"需求岗位"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.job_name||"--"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"需求人数"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.people||"--"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"岗位状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.status?a("span",[e._v("开启")]):a("span",[e._v("关闭")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"岗位结束时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("format")(1e3*t.row.end_time,"YYYY/MM/DD")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"完成数"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.complete_nums))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{staticStyle:{color:"#409EFF"},on:{click:function(a){return e.editJobMessage(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-link",{staticStyle:{color:"#409EFF"},on:{click:function(a){return e.delJobMessage(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("TablePage",{attrs:{pageSize:e.page.pageNum,pageNum:e.page.pageSize,total:e.total},on:{"update:pageSize":e.updateSize,"update:pageNum":e.updateNum}}),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"750px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{attrs:{size:"mini"}},[a("el-form-item",{attrs:{label:"需求部门"}},[a("el-select",{attrs:{placeholder:"请选择部门"},model:{value:e.form.department_id,callback:function(t){e.$set(e.form,"department_id",t)},expression:"form.department_id"}},e._l(e.departmentList,function(e){return a("el-option",{key:e.department_id,attrs:{value:e.department_id,label:e.department_name}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"指派人员"}},[a("el-checkbox-group",{model:{value:e.form.userId,callback:function(t){e.$set(e.form,"userId",t)},expression:"form.userId"}},e._l(e.userList,function(e){return a("el-checkbox",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"招聘岗位"}},[a("el-input",{attrs:{placeholder:"请输入招聘岗位"},model:{value:e.form.jobName,callback:function(t){e.$set(e.form,"jobName",t)},expression:"form.jobName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"需求人数"}},[a("el-input",{attrs:{placeholder:"请输入需求人数"},model:{value:e.form.jobNum,callback:function(t){e.$set(e.form,"jobNum",t)},expression:"form.jobNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"岗位描述"}},[a("el-input",{attrs:{placeholder:"请输入岗位描述"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-switch",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"选择开始结束时间"}},[a("el-date-picker",{staticStyle:{width:"250px"},attrs:{size:"mini",type:"daterange",format:"yyyy/MM/dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:e.cancle}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.save}},[e._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticStyle:{width:"50%",float:"left"}},[t("div",[this._v("需求列表")])])}]};var m=a("VU/8")(n,r,!1,function(e){a("TTBO")},"data-v-2d98521a",null);t.default=m.exports},TTBO:function(e,t){}});
//# sourceMappingURL=35.5d41cde3f3dcdeb01e37.js.map