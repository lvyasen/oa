webpackJsonp([41],{DRJG:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("ryJa"),s=a.n(i),l=a("15QY"),r=a("8dnD"),o={components:{NavTemplent:l.a,TablePage:r.a},data:function(){return{total:0,departmentList:[],userList:[],page:{pageSize:1,pageNum:10},systemLogList:[],indicatorsList:[],editUserMessage:null,editUse:null,title:"修改用户指标",dialogVisible:!1,menu:!1,form:{targetType:"",score:"",unit:"",targetValue:"",indicators:"",finishValue:"",date:"",userName:"",departmentId:"",mobile:"",department_id:"",email:"",name:"",note:""}}},methods:{getindicatorsList:function(){var t=this;this.$post("/getQuotaList",{page:this.page.pageSize,pageNum:this.page.pageNum}).then(function(e){t.indicatorsList=e.list,t.total=e.count})},getDepartmentList:function(){var t=this;this.$post("/getDepartmentList").then(function(e){t.departmentList=e.list}).catch(function(e){t.$message.error(e)})},getUserList:function(){var t=this;this.$post("/getUserList").then(function(e){t.userList=e.list})},getSystemLogList:function(){var t=this;this.startTime=this.$root.$options.filters.dateFormat(this.form.date[0],"YYYY/MM/DD"),this.lastTime=this.$root.$options.filters.dateFormat(this.form.date[1],"YYYY/MM/DD"),this.$post("/getUserQuotaList",{page:this.page.pageSize,pageNum:this.page.pageNum,start_time:this.startTime,end_time:this.lastTime,user_id:this.form.userName,department_id:this.form.departmentId}).then(function(e){t.total=e.count,t.systemLogList=e.list})},editMessage:function(t){this.editUserMessage=t,this.dialogVisible=!0,t.id?(this.form=t,this.menu=!0):(this.form.mobile="",this.form.email="",this.form.name="",this.form.department_id="",this.menu=!1)},delMessage:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$post("delUserQuota",{user_quota_id:t.user_quota_id}).then(function(){e.$message.success("删除成功")})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},cancle:function(){this.dialogVisible=!1,this.$emit("close")},save:function(){var t=this;console.log(this.form),this.$post("addUserQuota",{user_id:this.form.name,target_value:this.form.targetValue,department_id:this.form.department_id,target_date_type:this.form.targetType,complete_value:this.form.finishValue,remark:this.form.note,score:this.form.score,complete_date:s()(this.form.date).format("YYYY/MM/DD"),unit:this.form.unit,quota_id:this.form.indicators}).then(function(){t.$message.success("用户新增成功"),t.dialogVisible=!1,t.$emit("close"),t.getSystemLogList()})}},mounted:function(){this.getindicatorsList(),this.getUserList(),this.getDepartmentList()}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("NavTemplent",{attrs:{title:"部门指标数据"}}),t._v(" "),a("div",{staticStyle:{padding:"15px 10% 15px 15px"}},[a("div",[a("h5",{staticStyle:{"font-weight":"bold"}},[t._v("数据筛选")]),t._v(" "),a("el-form",{staticStyle:{"margin-top":"15px"},attrs:{"label-width":"80px",inline:"",size:"mini"},nativeOn:{submit:function(t){t.preventDefault()}}},[a("el-date-picker",{attrs:{size:"mini",type:"daterange",format:"yyyy/MM/dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.getSystemLogList},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}}),t._v(" "),a("el-form-item",{attrs:{label:"部门"}},[a("el-select",{attrs:{placeholder:"请选择部门"},on:{change:t.getSystemLogList},model:{value:t.form.departmentId,callback:function(e){t.$set(t.form,"departmentId",e)},expression:"form.departmentId"}},t._l(t.departmentList,function(t){return a("el-option",{key:t.department_id,attrs:{value:t.department_id,label:t.department_name}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"姓名"}},[a("el-select",{attrs:{placeholder:"请选择姓名"},model:{value:t.form.userName,callback:function(e){t.$set(t.form,"userName",e)},expression:"form.userName"}},t._l(t.userList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"}},[a("i",{staticClass:"el-icon-search"}),t._v("\n            筛选")])],1)],1)],1),t._v(" "),a("div",{staticClass:"tableTitle"},[t._m(0),t._v(" "),a("span",{staticStyle:{width:"50%",float:"right","text-align":"right"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.editMessage}},[a("i",{staticClass:"el-icon-plus"}),t._v("添加")])],1)]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.indicatorsList,border:""}},[a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"用户名"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.user_name||"--"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"备注"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.remark||"--"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"IP地址"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.ip||"--"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t._f("dateFormat")(1e3*e.row.add_time,"YYYY/MM/DD"))+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return t.editMessage(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return t.delMessage(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("TablePage",{attrs:{pageSize:t.page.pageSize,pageNum:t.page.pageNum,total:t.total}}),t._v(" "),a("el-dialog",{attrs:{title:t.title,visible:t.dialogVisible,width:"750px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{attrs:{size:"mini"}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-select",{attrs:{placeholder:"请选择姓名"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}},t._l(t.userList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"部门"}},[a("el-select",{attrs:{placeholder:"请选择部门"},on:{change:t.getSystemLogList},model:{value:t.form.department_id,callback:function(e){t.$set(t.form,"department_id",e)},expression:"form.department_id"}},t._l(t.departmentList,function(t){return a("el-option",{key:t.department_id,attrs:{value:t.department_id,label:t.department_name}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"指标"}},[a("el-select",{attrs:{placeholder:"请选择指标"},model:{value:t.form.indicators,callback:function(e){t.$set(t.form,"indicators",e)},expression:"form.indicators"}},t._l(t.indicatorsList,function(t){return a("el-option",{key:t.quota_id,attrs:{label:t.quota_name,value:t.quota_id}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"目标值"}},[a("el-input",{attrs:{placeholder:"请输入目标值"},model:{value:t.form.targetValue,callback:function(e){t.$set(t.form,"targetValue",e)},expression:"form.targetValue"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"单位"}},[a("el-select",{attrs:{placeholder:"请选择单位"},model:{value:t.form.unit,callback:function(e){t.$set(t.form,"unit",e)},expression:"form.unit"}},[a("el-option",{attrs:{label:"百分比",value:1}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"目标期类型"}},[a("el-select",{attrs:{placeholder:"请选择部门"},model:{value:t.form.targetType,callback:function(e){t.$set(t.form,"targetType",e)},expression:"form.targetType"}},[a("el-option",{attrs:{value:1,label:"日"}}),t._v(" "),a("el-option",{attrs:{value:2,label:"周"}}),t._v(" "),a("el-option",{attrs:{value:3,label:"月"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"实际完成值"}},[a("el-input",{attrs:{placeholder:"请输入完成值"},model:{value:t.form.finishValue,callback:function(e){t.$set(t.form,"finishValue",e)},expression:"form.finishValue"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"该项得分"}},[a("el-input",{attrs:{placeholder:"请输入该项得分"},model:{value:t.form.score,callback:function(e){t.$set(t.form,"score",e)},expression:"form.score"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"选择日期"}},[a("el-date-picker",{staticClass:"dateditor",attrs:{type:"date",placeholder:"选择日期"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{placeholder:"请输入备注"},model:{value:t.form.note,callback:function(e){t.$set(t.form,"note",e)},expression:"form.note"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:t.cancle}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticStyle:{width:"50%",float:"left"}},[e("div",[this._v("部门指标列表")])])}]};var m=a("VU/8")(o,n,!1,function(t){a("fdR7")},"data-v-14585422",null);e.default=m.exports},fdR7:function(t,e){}});
//# sourceMappingURL=41.3d5390432b1a0ad6d085.js.map