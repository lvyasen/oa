webpackJsonp([25],{Apq6:function(t,e){},bSQs:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("15QY"),s=a("8dnD"),n={components:{NavTemplent:i.a,TablePage:s.a},data:function(){return{page:{pageSize:1,pageNum:50},editUse:null,title:"指标信息",dialogVisible:!1,indicatorsList:[],departmentList:[],quotaMessage:null,total:0,form:{department_id:"",departmentId:"",quota_name:"",quota_desc:"",quota_Accounted:""}}},methods:{getindicatorsList:function(){var t=this;this.$post("/getQuotaList",{department_id:this.form.departmentId,page:this.page.pageSize,pageNum:this.page.pageNum}).then(function(e){t.indicatorsList=e.list,t.total=e.count})},updateSize:function(t){this.page.pageSize=1,this.page.pageNum=t,this.getindicatorsList()},updateNum:function(t){this.page.pageSize=t,this.getindicatorsList()},getDepartmentList:function(){var t=this;this.$post("/getDepartmentList").then(function(e){t.departmentList=e.list}).catch(function(e){t.$message.error(e)})},editUseMessage:function(t){this.dialogVisible=!0,this.quotaMessage=t,t.quota_id?this.form=t:(this.form.quota_name="",this.form.quota_desc="",this.form.department_id="")},delUseMessage:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$post("delQuota",{quota_id:t.quota_id}).then(function(){e.getindicatorsList(),e.$message.success("指标删除成功")})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},cancle:function(){this.dialogVisible=!1,this.$emit("close")},save:function(){var t=this;""!==this.form.department_id?""!==this.form.quota_name?this.quotaMessage.quota_id?(this.form.quota_id=this.quotaMessage.quota_id,this.$post("editQuota",this.form).then(function(){t.$message.success("指标新增成功"),t.dialogVisible=!1,t.$emit("close"),t.getindicatorsList()})):this.$post("addQuota",this.form).then(function(){t.$message.success("指标新增成功"),t.dialogVisible=!1,t.$emit("close"),t.getindicatorsList()}):this.$message.error("指标名不能为空"):this.$message.error("部门不能为空")}},mounted:function(){this.getDepartmentList(),this.getindicatorsList()}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("NavTemplent",{attrs:{title:"我的任务"}}),t._v(" "),a("div",{staticStyle:{padding:"15px 10% 15px 15px"}},[a("div",[a("h5",{staticStyle:{"font-weight":"bold"}},[t._v("数据筛选")]),t._v(" "),a("el-form",{staticStyle:{"margin-top":"15px"},attrs:{"label-width":"80px",inline:"",size:"mini"},nativeOn:{submit:function(t){t.preventDefault()}}},[a("el-form-item",{attrs:{label:"部门"}},[a("el-select",{attrs:{placeholder:"请选择部门"},on:{change:t.getindicatorsList},model:{value:t.form.departmentId,callback:function(e){t.$set(t.form,"departmentId",e)},expression:"form.departmentId"}},t._l(t.departmentList,function(t){return a("el-option",{key:t.department_id,attrs:{value:t.department_id,label:t.department_name}})}),1)],1)],1)],1),t._v(" "),a("div",{staticClass:"tableTitle"},[t._m(0),t._v(" "),a("span",{staticStyle:{width:"50%",float:"right","text-align":"right"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.editUseMessage}},[a("i",{staticClass:"el-icon-plus"}),t._v("添加")])],1)]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.indicatorsList,border:""}},[a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"部门名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.department_name||"--"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"指标名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.quota_name||"--"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"更新时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("dateFormat")(1e3*e.row.add_time,"YYYY/MM/DD")))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{staticStyle:{color:"#409EFF"},on:{click:function(a){return t.editUseMessage(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-link",{staticStyle:{color:"#409EFF"},on:{click:function(a){return t.delUseMessage(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("TablePage",{attrs:{pageSize:t.page.pageNum,pageNum:t.page.pageSize,total:t.total},on:{"update:pageSize":t.updateSize,"update:pageNum":t.updateNum}}),t._v(" "),a("el-dialog",{attrs:{title:t.title,visible:t.dialogVisible,width:"750px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{attrs:{size:"mini"}},[a("el-form-item",{attrs:{label:"部门"}},[a("el-select",{attrs:{placeholder:"请选择部门"},model:{value:t.form.department_id,callback:function(e){t.$set(t.form,"department_id",e)},expression:"form.department_id"}},t._l(t.departmentList,function(t){return a("el-option",{key:t.department_id,attrs:{value:t.department_id,label:t.department_name}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"指标名称"}},[a("el-input",{attrs:{placeholder:"请输入指标名称"},model:{value:t.form.quota_name,callback:function(e){t.$set(t.form,"quota_name",e)},expression:"form.quota_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"指标描述"}},[a("el-input",{attrs:{type:"textarea",maxlength:"100","show-word-limit":"",placeholder:"请输入指标描述"},model:{value:t.form.quota_desc,callback:function(e){t.$set(t.form,"quota_desc",e)},expression:"form.quota_desc"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"指标权重"}},[a("el-input",{attrs:{placeholder:"请输入指标占比"},model:{value:t.form.quota_Accounted,callback:function(e){t.$set(t.form,"quota_Accounted",e)},expression:"form.quota_Accounted"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:t.cancle}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticStyle:{width:"50%",float:"left"}},[e("div",[this._v("任务列表")])])}]};var l=a("VU/8")(n,o,!1,function(t){a("Apq6")},"data-v-502c96c8",null);e.default=l.exports}});
//# sourceMappingURL=25.f51913be3e473a02b6d2.js.map