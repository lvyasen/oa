webpackJsonp([26],{SutI:function(t,e){},zMyl:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("ryJa"),s=a.n(i),o=a("15QY"),r=a("8dnD"),n={components:{NavTemplent:o.a,TablePage:r.a},data:function(){return{orderCostList:[],isDownload:"0",page:{pageSize:1,pageNum:50},total:0,siteList:[],orderCostChartList:[],orderCostChartListTime:[],form:{site:"",date:[s()(s()().valueOf()-31536e6).format("YYYY/MM/DD"),s()(s()()+864e5).format("YYYY/MM/DD")]}}},methods:{getSiteList:function(){var t=this;this.$post("/getGaWebSitList",{pageNum:1e4,page:this.page.pageSize,website_name:this.form.siteName}).then(function(e){t.siteList=e.list})},updateSite:function(){this.getOrderCost(),this.getOrderCostChart()},updateSize:function(t){this.page.pageSize=1,this.page.pageNum=t,this.getOrderCost()},updateNum:function(t){this.page.pageSize=t,this.getOrderCost()},getOrderCost:function(){var t=this;this.startTime=this.$root.$options.filters.dateFormat(this.form.date[0],"YYYY/MM/DD"),this.lastTime=this.$root.$options.filters.dateFormat(this.form.date[1],"YYYY/MM/DD"),this.$post("/getOrderCostList",{page:this.page.pageSize,pageNum:this.page.pageNum,start_time:this.startTime,end_time:this.lastTime,web_id:this.form.site,download:this.isDownload}).then(function(e){t.orderCostList=e.list,t.total=e.count})},downLoad:function(){var t=this;this.isDownload=1,this.startTime=this.$root.$options.filters.dateFormat(this.form.date[0],"YYYY/MM/DD"),this.lastTime=this.$root.$options.filters.dateFormat(this.form.date[1],"YYYY/MM/DD"),this.$exportExcel("/getOrderCostList",{pageNum:this.page.pageNum,page:this.page.pageSize,start_time:this.startTime,end_time:this.lastTime,web_id:this.form.site,download:this.isDownload}).then(function(){t.$message.success("下载成功")})},getOrderCostChart:function(){var t=this;this.$post("getOrderCostChart",{web_id:this.form.site}).then(function(e){t.orderCostChartListTime=e.order_cost.map(function(t){return t.date}),t.orderCostChartList=e.order_cost.map(function(t){return t.total_price}),e.order_cost.length&&t.drawLine()})},drawLine:function(){this.$echarts.init(document.getElementById("myChart")).setOption({title:{text:"采购费用"},xAxis:{type:"category",boundaryGap:!1,data:this.orderCostChartListTime},yAxis:{type:"value"},series:[{data:this.orderCostChartList,type:"line",areaStyle:{}}]})}},mounted:function(){this.getOrderCostChart(),this.getSiteList(),this.getOrderCost()}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("NavTemplent",{attrs:{title:"采购费用"}}),t._v(" "),a("div",{staticStyle:{padding:"15px 10% 15px 15px"}},[a("div",[a("h5",{staticStyle:{"font-weight":"bold"}},[t._v("数据筛选")]),t._v(" "),a("el-form",{staticStyle:{"margin-top":"15px"},attrs:{"label-width":"80px",inline:"",size:"mini"},nativeOn:{submit:function(t){t.preventDefault()}}},[a("el-form-item",{attrs:{label:"站点"}},[a("el-select",{attrs:{placeholder:"请选择站点"},on:{change:t.updateSite},model:{value:t.form.site,callback:function(e){t.$set(t.form,"site",e)},expression:"form.site"}},t._l(t.siteList,function(t){return a("el-option",{key:t.web_id,attrs:{value:t.web_id,label:t.web_name}})}),1)],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticStyle:{width:"100%",height:"400px"},attrs:{id:"myChart"}})])],1),t._v(" "),a("div",{staticClass:"tableTitle"},[a("span",{staticStyle:{width:"50%",float:"left"}},[a("div",{staticStyle:{float:"left",width:"100px"}},[t._v("采购列表")]),t._v(" "),a("el-form",{staticStyle:{float:"left"},attrs:{"label-width":"80px",inline:"",size:"mini"},nativeOn:{submit:function(t){t.preventDefault()}}},[a("el-date-picker",{staticStyle:{width:"250px"},attrs:{size:"mini",type:"daterange",format:"yyyy/MM/dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.getOrderCost},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1)],1),t._v(" "),a("span",{staticStyle:{width:"50%",float:"right","text-align":"right"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.downLoad}},[a("i",{staticClass:"el-icon-download"}),t._v("导出")])],1)]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.orderCostList,border:""}},[a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"仓库SKU",width:"180px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.productBarcode||"--"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"采购负责人"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.buyerName||"--"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"采购数量"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.quantity||"--"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"采购价"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.avgPurchasePrice||"--"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"平均单价"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.avgUnitPriceOrg||"--"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"总成本"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.totalCost||0))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"采购日期"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("dateFormat")(e.row.pay_time,"YYYY/MM/DD")))])]}}])})],1),t._v(" "),a("TablePage",{attrs:{pageSize:t.page.pageNum,pageNum:t.page.pageSize,total:t.total},on:{"update:pageSize":t.updateSize,"update:pageNum":t.updateNum}})],1)],1)},staticRenderFns:[]};var d=a("VU/8")(n,l,!1,function(t){a("SutI")},"data-v-4c1bfddc",null);e.default=d.exports}});
//# sourceMappingURL=26.737bef5c60065eb89c49.js.map